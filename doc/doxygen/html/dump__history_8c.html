<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Atmospheric Athena: Atmospheric-Athena/src/dump_history.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Atmospheric Athena
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d72a5be45d0550369e5d60be167cce07.html">Atmospheric-Athena</a></li><li class="navelem"><a class="el" href="dir_d0e7bb5c4ff29ebf76eab911196cb2f6.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dump_history.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions to write dumps of scalar "history" variables in a formatted table.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="copyright_8h_source.html">copyright.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;defs.h&quot;</code><br />
<code>#include &quot;<a class="el" href="athena_8h_source.html">athena.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prototypes_8h_source.html">prototypes.h</a>&quot;</code><br />
</div>
<p><a href="dump__history_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a97440e5d1a0e859e11abc6552b758d8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#a97440e5d1a0e859e11abc6552b758d8c">NSCAL</a>&#160;&#160;&#160;14</td></tr>
<tr class="separator:a97440e5d1a0e859e11abc6552b758d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458b9b0820c5dc45a89076bfaa052440"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#a458b9b0820c5dc45a89076bfaa052440">MAX_USR_H_COUNT</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:a458b9b0820c5dc45a89076bfaa052440"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a04359dca00afaaa4174cea334622a472"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#a04359dca00afaaa4174cea334622a472">dump_history</a> (<a class="el" href="struct_mesh_s.html">MeshS</a> *pM, <a class="el" href="struct_output_s.html">OutputS</a> *pOut)</td></tr>
<tr class="memdesc:a04359dca00afaaa4174cea334622a472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to write dumps of scalar "history" variables in a formatted table.  <a href="#a04359dca00afaaa4174cea334622a472">More...</a><br /></td></tr>
<tr class="separator:a04359dca00afaaa4174cea334622a472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af708912b4ea7f10be9fea2861ea0374c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#af708912b4ea7f10be9fea2861ea0374c">dump_history_enroll</a> (const <a class="el" href="athena_8h.html#aaa64b3ee5eefc566b7c09368c414de89">ConsFun_t</a> pfun, const char *label)</td></tr>
<tr class="memdesc:af708912b4ea7f10be9fea2861ea0374c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds new user-defined history variables.  <a href="#af708912b4ea7f10be9fea2861ea0374c">More...</a><br /></td></tr>
<tr class="separator:af708912b4ea7f10be9fea2861ea0374c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to write dumps of scalar "history" variables in a formatted table. </p>
<p>PURPOSE: Functions to write dumps of scalar "history" variables in a formatted table. "History" variables are mostly VOLUME AVERAGES, e.g.</p><ul>
<li>S = {ijk} q[k][j][i]*dx1[i]*dx2[j]*dx3[k] / {ijk} dx1[i]*dx2[j]*dx3[k],</li>
</ul>
<p>although other quantities like time and dt are also output. To compute TOTAL, VOLUME INTEGRATED quantities, just multiply by the Domain volume, which is output in the first line of the history file. History data is written periodically, giving the time-evolution of that quantitity. Default (hardwired) values are:</p><ul>
<li>scal[0] = time</li>
<li>scal[1] = dt</li>
<li>scal[2] = mass</li>
<li>scal[3] = total energy</li>
<li>scal[4] = d*v1</li>
<li>scal[5] = d*v2</li>
<li>scal[6] = d*v3</li>
<li>scal[7] = 0.5*d*v1**2</li>
<li>scal[8] = 0.5*d*v2**2</li>
<li>scal[9] = 0.5*d*v3**2</li>
<li>scal[10] = 0.5*b1**2</li>
<li>scal[11] = 0.5*b2**2</li>
<li>scal[12] = 0.5*b3**2</li>
<li>scal[13] = d*Phi</li>
<li>scal[14+NSCALARS] = passively advected scalars</li>
<li>scal[15+NSCALARS] = angular momentum</li>
</ul>
<p>More variables can be hardwired by increasing NSCAL=number of variables, and adding calculation of desired quantities below.</p>
<p>Alternatively, up to MAX_USR_H_COUNT new history variables can be added using <a class="el" href="dump__history_8c.html#af708912b4ea7f10be9fea2861ea0374c" title="Adds new user-defined history variables. ">dump_history_enroll()</a> in the problem generator.</p>
<p>With SMR, data is averaged over each Domain separately, and dumped to separate files with the level and domain number encoded in the filename. Dumps are always made for all levels and domains, and are written in lev# directories of the root (rank=0) process FOR THAT DOMAIN COMMUNICATOR.</p>
<p>With SR, the default (hardwired) variables are:</p><ul>
<li>scal[0] = time</li>
<li>scal[1] = dt</li>
<li>scal[2] = mass</li>
<li>scal[3] = total energy</li>
<li>scal[4] = x1-mom</li>
<li>scal[5] = x2-mom</li>
<li>scal[6] = x3-mom</li>
<li>scal[7] = (U^t)**2</li>
<li>scal[8] = (U^x)**2</li>
<li>scal[9] = (U^y)**2</li>
<li>scal[10] = (U^z)**2</li>
<li>scal[11] = (b^t)**2</li>
<li>scal[12] = (b^x)**2</li>
<li>scal[13] = (b^y)**2</li>
<li>scal[14] = (b^z)**2</li>
<li>scal[15] = |b|**2</li>
<li>scal[16] = T^00_EM</li>
</ul>
<p>CONTAINS PUBLIC FUNCTIONS:</p><ul>
<li><a class="el" href="dump__history_8c.html#a04359dca00afaaa4174cea334622a472" title="Function to write dumps of scalar &quot;history&quot; variables in a formatted table. ">dump_history()</a> - Writes variables as formatted table</li>
<li><a class="el" href="dump__history_8c.html#af708912b4ea7f10be9fea2861ea0374c" title="Adds new user-defined history variables. ">dump_history_enroll()</a> - Adds new user-defined history variables </li>
</ul>

<p>Definition in file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a458b9b0820c5dc45a89076bfaa052440"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_USR_H_COUNT&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="dump__history_8c_source.html#l00079">79</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

</div>
</div>
<a class="anchor" id="a97440e5d1a0e859e11abc6552b758d8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NSCAL&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="dump__history_8c_source.html#l00076">76</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a04359dca00afaaa4174cea334622a472"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_history </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_mesh_s.html">MeshS</a> *&#160;</td>
          <td class="paramname"><em>pM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_output_s.html">OutputS</a> *&#160;</td>
          <td class="paramname"><em>pOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to write dumps of scalar "history" variables in a formatted table. </p>

<p>Definition at line <a class="el" href="dump__history_8c_source.html#l00094">94</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dump__history_8c_a04359dca00afaaa4174cea334622a472_cgraph.png" border="0" usemap="#dump__history_8c_a04359dca00afaaa4174cea334622a472_cgraph" alt=""/></div>
<map name="dump__history_8c_a04359dca00afaaa4174cea334622a472_cgraph" id="dump__history_8c_a04359dca00afaaa4174cea334622a472_cgraph">
<area shape="rect" id="node2" href="cc__pos_8c.html#a9204d609430c459b0ace484b66dca353" title="given i,j,k returns cell&#45;centered x1,x2,x3 " alt="" coords="179,5,243,32"/><area shape="rect" id="node3" href="convert__var_8c.html#ae7dfb4da1bb433bf329ddd2a7a6fefb0" title="Wrapper for the Cons1D_to_Prim1D function, works for both NEWTONIAN and SPECIAL_RELATIVITY. " alt="" coords="157,56,264,83"/><area shape="rect" id="node5" href="ath__files_8c.html#a4c77811377d9605b4a52b830515b2a62" title="Creates descriptive output filenames. " alt="" coords="168,107,253,133"/><area shape="rect" id="node6" href="ath__log_8c.html#af21347278c9b783a269474386c4289c5" title="Foutput variable argument string to &quot;error log file&quot;. " alt="" coords="175,157,247,184"/><area shape="rect" id="node4" href="convert__var_8c.html#a168e092d771134a92ff8be7e624d51d9" title="Cons1D_to_Prim1D: NEWTONIAN VERSION. " alt="" coords="313,56,453,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dump__history_8c_a04359dca00afaaa4174cea334622a472_icgraph.png" border="0" usemap="#dump__history_8c_a04359dca00afaaa4174cea334622a472_icgraph" alt=""/></div>
<map name="dump__history_8c_a04359dca00afaaa4174cea334622a472_icgraph" id="dump__history_8c_a04359dca00afaaa4174cea334622a472_icgraph">
<area shape="rect" id="node2" href="prototypes_8h.html#a9034e0a0c277e481597e9a0709908edb" title="Initializes data output. " alt="" coords="158,5,242,32"/><area shape="rect" id="node3" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. " alt="" coords="291,5,341,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af708912b4ea7f10be9fea2861ea0374c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_history_enroll </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="athena_8h.html#aaa64b3ee5eefc566b7c09368c414de89">ConsFun_t</a>&#160;</td>
          <td class="paramname"><em>pfun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds new user-defined history variables. </p>

<p>Definition at line <a class="el" href="dump__history_8c_source.html#l00475">475</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_cgraph.png" border="0" usemap="#dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_cgraph" alt=""/></div>
<map name="dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_cgraph" id="dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_cgraph">
<area shape="rect" id="node2" href="prototypes_8h.html#ab4a402b1bd69e8f49435ee8fe45ecce6" title="Terminate execution and output error message Uses variable&#45;length argument lists provided in &lt;stdarg..." alt="" coords="202,5,278,32"/><area shape="rect" id="node4" href="prototypes_8h.html#a38f8cb947bb5fc0f4c63f5de8aa704dd" title="This is really strdup(), but strdup is not available in ANSI (&#45;pendantic or &#45;ansi will leave it undef..." alt="" coords="197,56,283,83"/><area shape="rect" id="node3" href="ath__log_8c.html#ad4fe019acf86bdfb9ab014b2f3ab10da" title="Open error file if needed and return a pointer to file. " alt="" coords="331,5,407,32"/><area shape="rect" id="node5" href="ath__log_8c.html#af21347278c9b783a269474386c4289c5" title="Foutput variable argument string to &quot;error log file&quot;. " alt="" coords="333,56,405,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_icgraph.png" border="0" usemap="#dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_icgraph" alt=""/></div>
<map name="dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_icgraph" id="dump__history_8c_af708912b4ea7f10be9fea2861ea0374c_icgraph">
<area shape="rect" id="node2" href="cylnewtmri_8c.html#a1b323f47153f1975b64382e0ffac6b73" title="problem" alt="" coords="237,5,307,32"/><area shape="rect" id="node3" href="cylnewtmri_8c.html#acf733c9792756cbec1e9d226c4ff37ab" title="problem_read_restart" alt="" coords="197,56,347,83"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 22 2015 21:26:26 for Atmospheric Athena by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
