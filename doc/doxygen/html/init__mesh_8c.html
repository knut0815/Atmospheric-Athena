<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Atmospheric Athena: Atmospheric-Athena/src/init_mesh.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Atmospheric Athena
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d72a5be45d0550369e5d60be167cce07.html">Atmospheric-Athena</a></li><li class="navelem"><a class="el" href="dir_d0e7bb5c4ff29ebf76eab911196cb2f6.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">init_mesh.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>General initialization of the nested mesh hierarchy.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="copyright_8h_source.html">copyright.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;defs.h&quot;</code><br />
<code>#include &quot;<a class="el" href="athena_8h_source.html">athena.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prototypes_8h_source.html">prototypes.h</a>&quot;</code><br />
</div>
<p><a href="init__mesh_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a916f9c7c3347abd0ff4e1acc00cd0f27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="init__mesh_8c.html#a916f9c7c3347abd0ff4e1acc00cd0f27">init_mesh</a> (<a class="el" href="struct_mesh_s.html">MeshS</a> *pM)</td></tr>
<tr class="memdesc:a916f9c7c3347abd0ff4e1acc00cd0f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">General initialization of the nested mesh hierarchy.  <a href="#a916f9c7c3347abd0ff4e1acc00cd0f27">More...</a><br /></td></tr>
<tr class="separator:a916f9c7c3347abd0ff4e1acc00cd0f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16d281ef7a56861fdf7da0f960086ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="init__mesh_8c.html#aa16d281ef7a56861fdf7da0f960086ef">get_myGridIndex</a> (<a class="el" href="struct_domain_s.html">DomainS</a> *pD, const int myID, int *pi, int *pj, int *pk)</td></tr>
<tr class="memdesc:aa16d281ef7a56861fdf7da0f960086ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches GData[][][] array to find i,j,k components of block being updated on this processor.  <a href="#aa16d281ef7a56861fdf7da0f960086ef">More...</a><br /></td></tr>
<tr class="separator:aa16d281ef7a56861fdf7da0f960086ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>General initialization of the nested mesh hierarchy. </p>
<p>PURPOSE: General initialization of the nested mesh hierarchy. Works for both nested and uniform meshes, on single and multiple processors. Each Mesh contains one or more levels, each level contains one or more Domains (regions with the same grid resolution), and depending on the parallelization each Domain contains one or more Grids (however there can never be more than one Grid per Domain being updated on any given processor). In the Mesh, this hierarchy is stored as an "array" of Domains indexed as Domain[nlevel][ndomain]. Since ndomain is different for each level, this "array" is not square, (really it is nlevel pointers, each to ndomain[nlevel] Domains).</p>
<p>Note for a uniform mesh on a single processor:</p><ul>
<li># of Mesh levels = # of Domains = # of Grids = 1 For a uniform mesh on multiple processors:</li>
<li># of Mesh levels = # of Domains = 1; # of Grids = # of processors For a nested mesh on a single processor:</li>
<li># of Domains = # of Grids</li>
</ul>
<p>For a nested mesh on multiple processors, there is no relationship between these quantaties in general.</p>
<p>This function:</p><ul>
<li>(1) sets properties of each Domain read from &lt;domain&gt; blocks in input file</li>
<li>(2) allocates and initializes the array of Domains,</li>
<li><p class="startli">(3) divides each Domain into one or more Grids depending on the parallelization.</p>
<p class="startli">This function supercedes init_domain() from v3.2. The <a class="el" href="init__grid_8c.html#a95667109c997592ac508a6f67e34b827" title="Initializes most variables in the Grid structure. ">init_grid()</a> function initializes the data in each Grid structure in each Domain, including finding all child and parent Grids with SMR.</p>
</li>
</ul>
<p>CONTAINS PUBLIC FUNCTIONS:</p><ul>
<li><a class="el" href="init__mesh_8c.html#a916f9c7c3347abd0ff4e1acc00cd0f27" title="General initialization of the nested mesh hierarchy. ">init_mesh()</a></li>
<li><a class="el" href="init__mesh_8c.html#aa16d281ef7a56861fdf7da0f960086ef" title="Searches GData[][][] array to find i,j,k components of block being updated on this processor...">get_myGridIndex()</a></li>
</ul>
<p>PRIVATE FUNCTION PROTOTYPES:</p><ul>
<li>dom_decomp() - calls auto domain decomposition functions</li>
<li>dom_decomp_2d() - finds optimum domain decomposition in 2D</li>
<li>dom_decomp_3d() - finds optimum domain decomposition in 3D </li>
</ul>

<p>Definition in file <a class="el" href="init__mesh_8c_source.html">init_mesh.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa16d281ef7a56861fdf7da0f960086ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_myGridIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_domain_s.html">DomainS</a> *&#160;</td>
          <td class="paramname"><em>pD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>myID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches GData[][][] array to find i,j,k components of block being updated on this processor. </p>

<p>Definition at line <a class="el" href="init__mesh_8c_source.html#l00885">885</a> of file <a class="el" href="init__mesh_8c_source.html">init_mesh.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_cgraph.png" border="0" usemap="#init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_cgraph" alt=""/></div>
<map name="init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_cgraph" id="init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_cgraph">
<area shape="rect" id="node2" href="prototypes_8h.html#ab4a402b1bd69e8f49435ee8fe45ecce6" title="Terminate execution and output error message Uses variable&#45;length argument lists provided in &lt;stdarg..." alt="" coords="179,5,255,32"/><area shape="rect" id="node3" href="ath__log_8c.html#ad4fe019acf86bdfb9ab014b2f3ab10da" title="Open error file if needed and return a pointer to file. " alt="" coords="305,5,381,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_icgraph.png" border="0" usemap="#init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_icgraph" alt=""/></div>
<map name="init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_icgraph" id="init__mesh_8c_aa16d281ef7a56861fdf7da0f960086ef_icgraph">
<area shape="rect" id="node2" href="prototypes_8h.html#adf4dacdf2a70d9423bc50e7ea57b1056" title="Calls appropriate functions to set ghost zones. " alt="" coords="191,5,278,32"/><area shape="rect" id="node4" href="prototypes_8h.html#a73fd08ad3c131672ff0473236faee5e2" title="Sets function pointers for physical boundaries during initialization, allocates memory for send/recei..." alt="" coords="179,56,290,83"/><area shape="rect" id="node5" href="prototypes_8h.html#a95667109c997592ac508a6f67e34b827" title="Initializes most variables in the Grid structure. " alt="" coords="200,107,269,133"/><area shape="rect" id="node3" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. " alt="" coords="339,56,389,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a916f9c7c3347abd0ff4e1acc00cd0f27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_mesh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_mesh_s.html">MeshS</a> *&#160;</td>
          <td class="paramname"><em>pM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General initialization of the nested mesh hierarchy. </p>

<p>Definition at line <a class="el" href="init__mesh_8c_source.html#l00084">84</a> of file <a class="el" href="init__mesh_8c_source.html">init_mesh.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_cgraph.png" border="0" usemap="#init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_cgraph" alt=""/></div>
<map name="init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_cgraph" id="init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_cgraph">
<area shape="rect" id="node2" href="par_8c.html#a40b778a24bb0d47d69a023ec5c3276e7" title="Return a string. " alt="" coords="150,5,223,32"/><area shape="rect" id="node3" href="prototypes_8h.html#ab4a402b1bd69e8f49435ee8fe45ecce6" title="Terminate execution and output error message Uses variable&#45;length argument lists provided in &lt;stdarg..." alt="" coords="454,183,530,209"/><area shape="rect" id="node5" href="par_8c.html#ac03bbd5713f3a93db722aea8d1c1b5c0" title="Return an integer. " alt="" coords="151,107,222,133"/><area shape="rect" id="node6" href="ath__array_8c.html#a4d57e00d6537d3b632f67ab9501b589c" title="Construct 1D array = array[nc]. " alt="" coords="289,157,405,184"/><area shape="rect" id="node7" href="par_8c.html#ad7ff0f7b4cee0ec0751000359a117093" title="Return 0 or 1 if a block/name exists. " alt="" coords="309,208,385,235"/><area shape="rect" id="node8" href="par_8c.html#ac234e8c1085523fa6adcd6d4f48281b5" title="Return a Real value. " alt="" coords="149,259,224,285"/><area shape="rect" id="node9" href="par_8c.html#a789945c886abda300582ff5511c0a029" title="Return integer *name in *block if it exists, else use the integer def as a default value..." alt="" coords="139,309,235,336"/><area shape="rect" id="node10" href="par_8c.html#a92384b69c20d713c9e3f9f45234765a5" title="Set or add an integer. " alt="" coords="312,321,381,348"/><area shape="rect" id="node11" href="ath__array_8c.html#aaa55b7239bfb912dcdaaf2190ee20b65" title="Construct 3D array = array[nt][nr][nc]. " alt="" coords="289,397,405,424"/><area shape="rect" id="node12" href="ath__array_8c.html#af06c93640c785f8ca376b21222b5593b" title="Free memory used by 1D array. " alt="" coords="134,461,239,488"/><area shape="rect" id="node4" href="ath__log_8c.html#ad4fe019acf86bdfb9ab014b2f3ab10da" title="Open error file if needed and return a pointer to file. " alt="" coords="579,183,655,209"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_icgraph.png" border="0" usemap="#init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_icgraph" alt=""/></div>
<map name="init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_icgraph" id="init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27_icgraph">
<area shape="rect" id="node2" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. " alt="" coords="133,5,184,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 22 2015 21:26:26 for Atmospheric Athena by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
