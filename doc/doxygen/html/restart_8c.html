<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Atmospheric Athena: Atmospheric-Athena/src/restart.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Atmospheric Athena
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d72a5be45d0550369e5d60be167cce07.html">Atmospheric-Athena</a></li><li class="navelem"><a class="el" href="dir_d0e7bb5c4ff29ebf76eab911196cb2f6.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">restart.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for writing and reading restart files.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="copyright_8h_source.html">copyright.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;defs.h&quot;</code><br />
<code>#include &quot;<a class="el" href="athena_8h_source.html">athena.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prototypes_8h_source.html">prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="particle_8h_source.html">particles/particle.h</a>&quot;</code><br />
</div>
<p><a href="restart_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad964b97cdef7ace0e38dea077f7dbc0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="restart_8c.html#ad964b97cdef7ace0e38dea077f7dbc0b">restart_grids</a> (char *res_file, <a class="el" href="struct_mesh_s.html">MeshS</a> *pM)</td></tr>
<tr class="memdesc:ad964b97cdef7ace0e38dea077f7dbc0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads nstep, time, dt, and arrays of <a class="el" href="struct_cons_s.html" title="Conserved variables. IMPORTANT!! The order of the elements in ConsS CANNOT be changed. ">ConsS</a> and interface B for each of the Grid structures in the restart file.  <a href="#ad964b97cdef7ace0e38dea077f7dbc0b">More...</a><br /></td></tr>
<tr class="separator:ad964b97cdef7ace0e38dea077f7dbc0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c8423a9f51dd688b5867e611120ba0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="restart_8c.html#a0c8423a9f51dd688b5867e611120ba0e">dump_restart</a> (<a class="el" href="struct_mesh_s.html">MeshS</a> *pM, <a class="el" href="struct_output_s.html">OutputS</a> *pout)</td></tr>
<tr class="memdesc:a0c8423a9f51dd688b5867e611120ba0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a restart file, including problem-specific data from a user defined function.  <a href="#a0c8423a9f51dd688b5867e611120ba0e">More...</a><br /></td></tr>
<tr class="separator:a0c8423a9f51dd688b5867e611120ba0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for writing and reading restart files. </p>
<p>PURPOSE: Functions for writing and reading restart files. Restart files begin with the input parameter file (athinput.XX) used to start the run in text format, followed by binary format data for selected quantities (time, dt, etc) for each of the Grid structures being updated by this processor. Lastly, any problem-specific data in binary format is included, which must be written by a user function in the problem generator. Since all of the mesh data (NLevels, number of Domains, size of Grids, etc.) can be recalculated from the athinput file, only the dependent variables (time, dt, nstep, U, B, etc.) are dumped in restart files.</p>
<p>The athinput file included at the start of the restart file is parsed by <a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. ">main()</a> in Step 2, using the standard par_* functions, with the parameters used by <a class="el" href="init__mesh_8c.html#a916f9c7c3347abd0ff4e1acc00cd0f27" title="General initialization of the nested mesh hierarchy. ">init_mesh()</a> and <a class="el" href="init__grid_8c.html#a95667109c997592ac508a6f67e34b827" title="Initializes most variables in the Grid structure. ">init_grid()</a> to re-initialize the grid. Parameter values read from the athinput file contained in the resfile can be superceded by input from the command line, or another input file.</p>
<p>MPI parallel jobs must be restarted on the same number of processors as they were run originally.</p>
<p>With SMR, restart files contain ALL levels and domains being updated by each processor in one file, written in the default directory for the process.</p>
<p>CONTAINS PUBLIC FUNCTIONS:</p><ul>
<li><a class="el" href="restart_8c.html#ad964b97cdef7ace0e38dea077f7dbc0b" title="Reads nstep, time, dt, and arrays of ConsS and interface B for each of the Grid structures in the res...">restart_grids()</a> - reads nstep,time,dt,<a class="el" href="struct_cons_s.html" title="Conserved variables. IMPORTANT!! The order of the elements in ConsS CANNOT be changed. ">ConsS</a> and B from restart file</li>
<li><a class="el" href="restart_8c.html#a0c8423a9f51dd688b5867e611120ba0e" title="Writes a restart file, including problem-specific data from a user defined function. ">dump_restart()</a> - writes a restart file </li>
</ul>

<p>Definition in file <a class="el" href="restart_8c_source.html">restart.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0c8423a9f51dd688b5867e611120ba0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_restart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_mesh_s.html">MeshS</a> *&#160;</td>
          <td class="paramname"><em>pM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_output_s.html">OutputS</a> *&#160;</td>
          <td class="paramname"><em>pout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a restart file, including problem-specific data from a user defined function. </p>

<p>Definition at line <a class="el" href="restart_8c_source.html#l00463">463</a> of file <a class="el" href="restart_8c_source.html">restart.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="restart_8c_a0c8423a9f51dd688b5867e611120ba0e_cgraph.png" border="0" usemap="#restart_8c_a0c8423a9f51dd688b5867e611120ba0e_cgraph" alt=""/></div>
<map name="restart_8c_a0c8423a9f51dd688b5867e611120ba0e_cgraph" id="restart_8c_a0c8423a9f51dd688b5867e611120ba0e_cgraph">
<area shape="rect" id="node2" href="ath__array_8c.html#a4d57e00d6537d3b632f67ab9501b589c" title="Construct 1D array = array[nc]. " alt="" coords="173,5,289,32"/><area shape="rect" id="node3" href="prototypes_8h.html#ab4a402b1bd69e8f49435ee8fe45ecce6" title="Terminate execution and output error message Uses variable&#45;length argument lists provided in &lt;stdarg..." alt="" coords="355,31,431,57"/><area shape="rect" id="node5" href="ath__log_8c.html#af21347278c9b783a269474386c4289c5" title="Foutput variable argument string to &quot;error log file&quot;. " alt="" coords="195,107,267,133"/><area shape="rect" id="node6" href="ath__files_8c.html#a4c77811377d9605b4a52b830515b2a62" title="Creates descriptive output filenames. " alt="" coords="188,157,273,184"/><area shape="rect" id="node7" href="par_8c.html#aca86a680715a5deb34d96dc9d4279edd" title="Set or add a double. " alt="" coords="194,208,267,235"/><area shape="rect" id="node8" href="par_8c.html#a92384b69c20d713c9e3f9f45234765a5" title="Set or add an integer. " alt="" coords="196,259,265,285"/><area shape="rect" id="node9" href="par_8c.html#a0a1296aa610308e1d4cb8c334a1d0c57" title="Debugging aid: print out the current status of all Blocks/Pars. " alt="" coords="189,309,272,336"/><area shape="rect" id="node10" href="blast_8c.html#a2c334369ab621e9815591c76ccfb5fc7" title="problem_write_restart" alt="" coords="155,360,306,387"/><area shape="rect" id="node11" href="ath__array_8c.html#af06c93640c785f8ca376b21222b5593b" title="Free memory used by 1D array. " alt="" coords="178,411,283,437"/><area shape="rect" id="node4" href="ath__log_8c.html#ad4fe019acf86bdfb9ab014b2f3ab10da" title="Open error file if needed and return a pointer to file. " alt="" coords="481,31,557,57"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="restart_8c_a0c8423a9f51dd688b5867e611120ba0e_icgraph.png" border="0" usemap="#restart_8c_a0c8423a9f51dd688b5867e611120ba0e_icgraph" alt=""/></div>
<map name="restart_8c_a0c8423a9f51dd688b5867e611120ba0e_icgraph" id="restart_8c_a0c8423a9f51dd688b5867e611120ba0e_icgraph">
<area shape="rect" id="node2" href="prototypes_8h.html#a9034e0a0c277e481597e9a0709908edb" title="Initializes data output. " alt="" coords="155,5,239,32"/><area shape="rect" id="node3" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. " alt="" coords="288,5,339,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad964b97cdef7ace0e38dea077f7dbc0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restart_grids </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>res_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_mesh_s.html">MeshS</a> *&#160;</td>
          <td class="paramname"><em>pM</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads nstep, time, dt, and arrays of <a class="el" href="struct_cons_s.html" title="Conserved variables. IMPORTANT!! The order of the elements in ConsS CANNOT be changed. ">ConsS</a> and interface B for each of the Grid structures in the restart file. </p>
<p>By the time this function is called (in Step 6 of <a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. ">main()</a>), the Mesh hierarchy has already been re-initialized by <a class="el" href="init__mesh_8c.html#a916f9c7c3347abd0ff4e1acc00cd0f27" title="General initialization of the nested mesh hierarchy. ">init_mesh()</a> and <a class="el" href="init__grid_8c.html#a95667109c997592ac508a6f67e34b827" title="Initializes most variables in the Grid structure. ">init_grid()</a> in Step 4 of <a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. ">main()</a> using parameters in the athinput file at the start of this restart file, the command line, or from a new input file. </p>

<p>Definition at line <a class="el" href="restart_8c_source.html#l00056">56</a> of file <a class="el" href="restart_8c_source.html">restart.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_cgraph.png" border="0" usemap="#restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_cgraph" alt=""/></div>
<map name="restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_cgraph" id="restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_cgraph">
<area shape="rect" id="node2" href="prototypes_8h.html#ab4a402b1bd69e8f49435ee8fe45ecce6" title="Terminate execution and output error message Uses variable&#45;length argument lists provided in &lt;stdarg..." alt="" coords="186,5,262,32"/><area shape="rect" id="node4" href="blast_8c.html#acf733c9792756cbec1e9d226c4ff37ab" title="problem_read_restart" alt="" coords="149,56,299,83"/><area shape="rect" id="node3" href="ath__log_8c.html#ad4fe019acf86bdfb9ab014b2f3ab10da" title="Open error file if needed and return a pointer to file. " alt="" coords="347,5,423,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_icgraph.png" border="0" usemap="#restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_icgraph" alt=""/></div>
<map name="restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_icgraph" id="restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b_icgraph">
<area shape="rect" id="node2" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program. " alt="" coords="149,5,200,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 22 2015 21:26:27 for Atmospheric Athena by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
